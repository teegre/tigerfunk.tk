{% load static %}
{% load home_night %}
<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="{% static 'home/css/style.css' %}">
    <link rel="shortcut icon" type="img/x-icon" href="{% static 'home/img/favicon.png' %}">
    <title>{% block title %}{% endblock %}</title>
  </head>
  <body>
    <script>
      function toggleDarkMode() {
        let ss = document.styleSheets;
        if (ss.length === 1) {
          // Load dark mode
          let head = document.getElementsByTagName("head")[0];
          let css = document.createElement("link");
          css.rel = "stylesheet";
          css.type = "text/css";
          css.href = "{% static 'home/css/style-dark.css' %}";
          css.setAttribute("id", "dark-mode");
          head.appendChild(css);
          document.getElementById("dark-mode-button").innerHTML = "jour"
          document.cookie = "dark-mode=true; samesite=lax; path=/";
        } else {
          // Unload dark mode
          let css = document.getElementById("dark-mode");
          css.parentNode.removeChild(css);
          document.getElementById("dark-mode-button").innerHTML = "nuit"
          document.cookie = "dark-mode=false; samesite=lax; path=/";
        }
      }
    </script>
    <div>
      <header>
        <div class="logo">
          <a class="logo-home" href="{% url 'index' %}">TIGERFUNK.TK</a>
          <a class="logo-mg" href="{% url 'all' %}">500mg</a>
          <button id="dark-mode-button" onclick="toggleDarkMode()">
            nuit
          </button>
          <script>
            if (document.cookie === "dark-mode=true") {
              toggleDarkMode();
            }
            {% is_night as night %}
            {% if night is True %}
            if (document.cookie === "") {
              toggleDarkMode();
            }
            {% endif %}
          </script>
        </div>
        <hr>
      {% block header %}
      {% endblock %}
      </header>
      {% include 'home/messages.html' %}
      {% block body %}
      {% endblock %}
      <hr>
      <script>
        if (document.cookie === "dark-mode=true") {
          document.getElementById("dark-mode-button").innerHTML = "jour";
        } else {
          document.getElementById("dark-mode-button").innerHTML = "nuit";
        }
      </script>
      <footer>
        Â© {% now 'Y' %} <b>tigerfunk.tk</b>
        &blacksquare; <a href="{% url 'index' %}">accueil</a>
        &blacksquare; <a href={% url 'feed' %}>rss</a>
        &blacksquare; <a href="https://odysee.com/@tigerfreq:9" target="_blank">odysee</a>
        &blacksquare; <a href="https://libre.fm/user/teegre" target="_blank">libre.fm</a>
        &blacksquare; <a href="https://tigerfreq1.bandcamp.com" target="_blank">bandcamp</a>
      </footer>
    </div>
  </body>
</html>
